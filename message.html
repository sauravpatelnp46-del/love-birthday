<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Love Letter üíå</title>
<link rel="stylesheet" href="style.css">
<style>
  /* Overlay to start music on iPhone */
  #musicOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.4rem;
    z-index: 9999;
    text-align: center;
    cursor: pointer;
  }
</style>
</head>
<body class="page message" data-page="message">
  <audio id="bgMusic" loop>
    <source src="music1.mp3" type="audio/mpeg">
  </audio>

  <!-- Music start overlay for iPhone -->
  <div id="musicOverlay">üéµ Tap to Start the Music ‚ù§Ô∏è</div>

  <main class="center card">
    <h2 class="title small">‚ù§Ô∏èThis is for you My Love‚ù§Ô∏è</h2>
    <div id="message" class="typewriter" aria-live="polite"></div>

    <div class="controls" id="msgControls" aria-hidden="true">
      <button id="toGallery" class="btn primary" aria-label="See the gallery">Click Here to See My Heart‚ù§Ô∏è</button>
    </div>
  </main>

  <script src="hearts.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const text = `Happy Birthday, my love ‚ù§Ô∏è Every moment with you is magical. You make my world brighter and my heart fuller. I‚Äôm so lucky to have you. I love you forever. üíï`;
      const out = document.getElementById('message');
      const controls = document.getElementById('msgControls');
      const toGallery = document.getElementById('toGallery');
      const music = document.getElementById('bgMusic');
      const overlay = document.getElementById('musicOverlay');

      // Unlock audio on user tap
      overlay.addEventListener('click', () => {
        music.play().then(() => {
          overlay.style.display = 'none';
        });
      });

      // Typewriter effect
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function typewriter(str, el, speed=40) {
        if (reduce) { el.textContent = str; controls.removeAttribute('aria-hidden'); return; }
        let i = 0;
        (function step(){
          if (i <= str.length) {
            el.textContent = str.slice(0, i++);
            setTimeout(step, speed);
          } else {
            controls.removeAttribute('aria-hidden');
          }
        })();
      }
      typewriter(text, out, 175);

      toGallery.addEventListener('click', () => location.href = 'gallery.html');
    });
  </script>
</body>
</html>
