<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>I Love You ❤️</title>
<link rel="stylesheet" href="style.css">
<style>
  /* Overlay to request tap */
  #musicOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 9999;
  }
  #musicOverlay button {
    margin-top: 15px;
    padding: 12px 20px;
    background: #ff3366;
    border: none;
    border-radius: 12px;
    color: white;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body class="page final" data-page="final">
  <!-- Hidden audio -->
  <audio id="bgMusic" loop>
    <source src="music3.mp3" type="audio/mpeg">
  </audio>

  <!-- Overlay for iPhone users -->
  <div id="musicOverlay">
    <h2>🎶 Tap to Start the Celebration 🎶</h2>
    <button id="startBtn">Play Music & Continue</button>
  </div>

  <canvas id="confettiCanvas" class="confetti-canvas" aria-hidden="true"></canvas>

  <main class="center card">
    <h1 class="title">🎉 I Love You Forever 🎉</h1>
    <h4>
      Happy Birthday My Love❤️. I wish for your good health and awesome year ahead. 
      Make a patient and believe me the day is coming when you will be mine completely 
      and I will handover precious gift as you are. Nothing is more precious than you 
      but I will give my 200% to make you Happy😂 more than you expected. 
      But for now I send a small gift and I hope it gave little happy and pleasure in your heart❤️. 
      Once again Happy birthday🥳 my Jaan! Stay Strong!💪 Stay Healthy!❤️‍🩹
    </h4>
    <h3>Love you Jaana❤️</h3>
    <div class="controls">
      <button id="replayBtn" class="btn primary" aria-label="Replay confetti">Celebrate Again</button>
    </div>
  </main>

  <script src="hearts.js" defer></script>
  <script src="confetti.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const music = document.getElementById('bgMusic');
      const overlay = document.getElementById('musicOverlay');
      const startBtn = document.getElementById('startBtn');

      // User must interact to start music on iPhone
      startBtn.addEventListener('click', () => {
        music.play().then(() => {
          overlay.style.display = 'none'; // hide overlay after play
        }).catch(err => {
          console.log("Music play failed:", err);
        });
      });

      const replay = document.getElementById('replayBtn');
      replay.addEventListener('click', ()=> {
        if (typeof startConfetti === 'function') startConfetti();
      });

      // Start confetti automatically
      if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        if (typeof startConfetti === 'function') startConfetti();
      }
    });
  </script>
</body>
</html>
